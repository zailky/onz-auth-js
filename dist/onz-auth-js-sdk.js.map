{"version":3,"file":"onz-auth-js-sdk.js","mappings":"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","sources":["webpack://onz/webpack/universalModuleDefinition","webpack://onz/./src/lib/event-emiter.js","webpack://onz/./src/constants.js","webpack://onz/./src/login/login.js","webpack://onz/./src/login/index.js","webpack://onz/./src/onz-auth.js","webpack://onz/./src/index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"onz\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"onz\"] = factory();\n\telse\n\t\troot[\"onz\"] = factory();\n})(self, function() {\nreturn ","class EventEmitter {\n    constructor() {\n        this.events = {};\n    }\n\n    _getEventListByName(eventName) {\n        if (typeof this.events[eventName] === 'undefined') {\n            this.events[eventName] = new Set();\n        }\n        return this.events[eventName];\n    }\n\n    on(eventName, fn) {\n        this._getEventListByName(eventName).add(fn);\n    }\n\n    once(eventName, fn) {\n        const self = this;\n\n        const onceFn = (...args) => {\n            self.removeListener(eventName, onceFn);\n            fn.apply(self, args);\n        };\n        this.on(eventName, onceFn);\n    }\n\n    emit(eventName, ...args) {\n        this._getEventListByName(eventName).forEach(\n            // eslint-disable-next-line func-names\n            function (fn) {\n                fn.apply(this, args);\n            }.bind(this)\n        );\n    }\n\n    removeListener(eventName, fn) {\n        this._getEventListByName(eventName).delete(fn);\n    }\n}\n\nexport default EventEmitter;","export const OnzAuthEnum = Object.freeze({ \n    Production: {\n        AuthUrl: 'https://auth.zailky.com',\n        IdpUrl: 'https://idp.zailky.com',\n        IdpApiUrl: 'https://idp-api.zailky.com'\n    },\n    Development: {\n        AuthUrl: 'https://auth-develop.zailky.com',\n        IdpUrl: 'https://idp-develop.zailky.com',\n        IdpApiUrl: 'https://idp-api-develop.zailky.com'\n    }\n});\n\nexport const OnzEvents = Object.freeze({    \n    OnAuthenticationFailure: 'authentication-failure',    \n    OnAuthenticated: 'authenticated',\n    OnClosed: 'closed',\n    OnError: 'error',\n    OnRefreshed: 'refreshed',\n    OnRefreshFailure: 'refresh-failure'\n});","import zoid from 'zoid';\n\nexport const OnzLoginComponent = zoid.create({\n    // The html tag used to render my component\n\n    tag: 'onz-login-component',\n\n    // The url that will be loaded in the iframe or popup, when someone includes my component on their page\n\n    url: ({ props }) => {\n        //return new URL('dummy.htm', window.location.href).href;\n        //return \"https://idp-develop.zailky.com/signin\"\n        return new URL('signin', props.apiURL).href;\n    },\n\n    // The size of the component on their page. Only px and % strings are supported\n    dimensions: {\n        width: '400px',\n        height: '600px'\n    },\n    // The properties they can (or must) pass down to my component. This is optional.\n\n    props: {\n        apiURL: {\n            type: 'string',\n            required: true\n        },\n        clientID: {\n            type: 'string',\n            required: false,\n            queryParam: 'client_id'\n        },\n        onLogin: {\n            type: 'function',\n            required: true\n        },\n        onLoginError: {\n            type: 'function',\n            required: true\n        }\n    },\n});\n","export * from './login';","import EventEmitter from './lib/event-emiter';\nimport { OnzAuthEnum, OnzEvents } from './constants';\nimport { OnzLoginComponent } from './login';\nimport axios from 'axios';\n\n/**\n * Handles all the browser's authentication flows\n * @constructor\n * @param {Object} options\n * @param {String} options.clientID the Client ID found on your project overview page\n * @param {String} [options.containerID] the element container id, will default to 'container'\n * @param {String} [options.isIframe] boolean value indicating whether it is a popup or iframe\n * @param {String} [options.mode] 'production' or 'development', defaults to 'production'\n */\nexport class Auth extends EventEmitter {\n    constructor(options) {\n        super();\n        if (!options) {\n            throw new Exception(\"invalid auth options\");\n        }\n        if (!options.clientID) {\n            throw new Exception(\"invalid clientID\");\n        }\n        this.clientID = options.clientID;\n        this.containerID = options.containerID ?? 'container';\n        this.isIframe = !!options.isIframe ? 'iframe' : 'popup';\n        this.mode = options.mode ?? 'production';\n        \n        this._initialiseURL();\n        this._initialiseComponent();\n    }\n\n    _initialiseURL() {\n        if (this.mode === 'development') {\n            this.urls = OnzAuthEnum.Development;\n        } else {\n            this.urls = OnzAuthEnum.Production;\n        }\n    }\n\n    _initialiseComponent() {\n        this.component = OnzLoginComponent({\n            clientID: this.clientID,\n            apiURL: this.urls.IdpUrl,\n            onLogin: function (authResult) {\n                console.log(OnzEvents.OnAuthenticated, authResult);\n                this.emit(OnzEvents.OnAuthenticated, authResult);\n            },\n            onLoginError: function (errorMessage) {\n                console.log(OnzEvents.OnError, errorMessage);\n                this.emit(OnzEvents.OnError, errorMessage);\n            },\n            onClose: () => {\n                console.log(OnzEvents.OnClosed);\n                this.emit(OnzEvents.OnClosed);\n            },\n            onError: (err) => {\n                const message = err.message ? err.message.toString() : '';\n                console.log(message);\n                this.emit(OnzEvents.OnError, err);\n            }\n        });\n    }\n    \n    showLogin() {\n        this.component.render(`#${this.containerID}`, this.isIframe);\n    }\n\n    refreshAccessToken() {\n\n    }\n\n    signOut() {\n\n    }\n\n    isAuthenticated() {\n\n    }\n\n    getOAuthTokens() {\n\n    }\n\n    getAccessToken() {\n\n    }\n\n    getDecodedAccessToken() {\n\n    }\n\n    getIDToken() {\n\n    }\n\n    getDecodedIdToken() {\n\n    }\n\n    getRefreshToken() {\n\n    }\n}","export * from './onz-auth';\n"],"names":["EventEmitter","events","eventName","Set","fn","_getEventListByName","add","self","onceFn","removeListener","args","apply","on","forEach","bind","OnzAuthEnum","Object","freeze","Production","AuthUrl","IdpUrl","IdpApiUrl","Development","OnzEvents","OnAuthenticationFailure","OnAuthenticated","OnClosed","OnError","OnRefreshed","OnRefreshFailure","zoid","OnzLoginComponent","create","tag","url","props","URL","apiURL","href","dimensions","width","height","type","required","clientID","queryParam","onLogin","onLoginError","axios","Auth","options","Exception","containerID","isIframe","mode","_initialiseURL","_initialiseComponent","urls","component","authResult","console","log","emit","errorMessage","onClose","onError","err","message","toString","render"],"sourceRoot":""}